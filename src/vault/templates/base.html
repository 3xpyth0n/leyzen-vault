<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="csrf-token" content="{{ csrf_token() }}" />
    <link rel="icon" type="image/png" href="/favicon.ico" />
    <title>{% block title %}Leyzen Vault{% endblock %}</title>
    <link rel="stylesheet" href="/static/vault.css" />
    {% block extra_head %}{% endblock %}
  </head>
  <body>
    <div class="vault-container">
      <header class="vault-header">
        <div class="header-brand">
          <h1>Leyzen Vault</h1>
          <span class="header-subtitle">End-to-End Encryption</span>
        </div>
        <nav class="header-nav">
          {% if request.path != "/security" %}
          <a href="/security" class="btn btn-secondary header-nav-link"
            >Security</a
          >
          {% endif %} {% if request.path == "/security" %}
          <a href="/" class="btn btn-secondary header-nav-link">Files</a>
          {% endif %}
          <a href="/orchestrator" class="btn btn-secondary header-nav-link"
            >Orchestrator</a
          >
          <form
            method="post"
            action="/logout"
            class="header-nav-form"
            id="logout-form"
          >
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
            <button type="submit" class="btn btn-secondary">Logout</button>
          </form>
        </nav>
      </header>

      <main class="vault-main">{% block content %}{% endblock %}</main>
    </div>

    <!-- Confirmation Modal -->
    <div
      id="confirmationModal"
      class="modal-overlay"
      aria-hidden="true"
      role="dialog"
      aria-labelledby="modal-title"
    >
      <div class="modal-container">
        <div class="modal-content-confirm">
          <div class="modal-icon" id="modalIcon">⚠️</div>
          <h2 id="modalTitle" class="modal-title">Confirm Action</h2>
          <p id="modalMessage" class="modal-message"></p>
          <div class="modal-buttons">
            <button id="modalCancel" class="modal-btn modal-btn-cancel">
              Cancel
            </button>
            <button id="modalConfirm" class="modal-btn modal-btn-confirm">
              Confirm
            </button>
          </div>
        </div>
      </div>
    </div>

    {% block scripts %}{% endblock %}
    <script src="/static/notifications.js"></script>
    <script src="/static/logout.js"></script>
  </body>
</html>
